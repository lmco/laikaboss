[General]
# The path to the Laika framework configuration file.
configpath={{ laika_config_base }}/laikaboss.conf

#config file(s) to apply last after this file
siteconfig={{ laika_config_base }}/laika_cluster.conf


[expiration]
log_file = /var/log/laikaboss/expiration.log
log_level = DEBUG

[storage-gui]
storage_index = {{ laika_config_base }}/laikastorage-index.conf

git_repo_clone_location = /var/laikaboss/repos/
base_gitlab_project_location = laikaboss/
gitlab_url = https://gitlab.example.com
gitlab_token = /etc/laikaboss/gitlab_token

docker_img_prefix = gitlab.example.com:4567/laikaboss/laikaboss
git_creds_file = {{ laika_config_base }}/secrets/git_deploy_creds
git_code_remote = https://gitlab.example.com/laikaboss/laikaboss.git
git_config_remote = https://gitlab.example.com/laikaboss/laikaboss_config.git
git_version_remote = https://gitlab.example.com/laikaboss/lb-version.git

minio_data_location = /data/minio/
cold_storage_location = /etc/lb-storage-2/cold-storage/

# pull list of current workers and their versions from redis
redis_worker_key_prefix=redisworker-

memorialized_bucket_name = memorialized-storage


[laikarestd]
version = 0.3
#120 MB
max_submission_size = 125829120


# ------------- miscellaneous auth settings ---------------
# Flask routes where auth is optional. They must directly match the
# flask rule that defines the route.
auth_allowed_anonymous_routes = [ "/scan/<queue>", "/oauth/scan/<queue>", "/oauth/status/<id1>", "/status/<id1>", "/oauth/source", "/source", "/api/v1/submit", "/api/v1/result" ]
# Trusted HTTP header (for certain routes)
auth_trusted_header = HTTP_AUTHUSER 
# users not required to be in a valid ldap group
auth_valid_users = [  ]
# Time in seconds after which a session held in a cookie 
# will expire. Current setting 9 hrs.
auth_cookie_max_age = 32400
auth_password_cache_max_age_secs = 360
# Routes specfied below can have deferred auth via a header
# that is set by a reverse proxy (e.g apache, nginx, etc..)

#auth_trust_header_in_urls = [ "/sso" ]
auth_trust_header_in_urls = [ ]

# You need to have redis running to run laikarestd (default: localhost)
#redis_url=unset
redis_status_timeout_secs = 600

log_file = /var/log/laikaboss/laikarestd.log
jwks_enabled=True
#remote_jwks_file_location = inherited
local_jwks_file_location = /var/laikaboss/jwks

# Password DB for local accounts for GUI and REST interfaces for example
# laika_user it contains hashes based on the apache htpassword tools
auth_user_password_db={{ laika_config_base }}/secrets/htpasswd.db

oauth_keyfile_public_internal = {{ laika_config_base }}/secrets/oauth-keyfile.public
oauth_keyfile_private_internal = {{ laika_config_base }}/secrets/oauth-keyfile.private

lb_client_secret_file = {{ laika_config_base }}/secrets/client_secret
lb_client = laikaboss-api

submission_dir = /var/laikaboss/submission-queue

queue_mapping = email:lc-email,webui:lc-webui,default:laikacollector
inline_scan_timeout = 60
